<html><head><title>Distro-sox - sox_ng wiki</title></head>
<body><p align=center>sox_ng wiki - Distro-sox</p>
<hr>
<h1 id="distrosox">Distro sox</h1>

<h2 id="notesformaintainersofsox.sf.net">Notes for maintainers of sox.sf.net</h2>

<p><code>sox_ng</code> stems from <code>sox-14.4.2</code>, not from a more recent <code>sox.sf.net</code> commit,
because the first <code>sox_ng</code> release (micro) concentrates on bug fixes and</p>

<ul>
<li>patches in the distros, mostly based on 14.4.2, are more likely to apply cleanly</li>
<li>sox.sf.net since 14.4.2 has 184 commits: a mixture of bug fixes, new features, build system fixes, code reformatting and refactoring and who knows what else</li>
<li>the regression test suite shows that 42b355 fails on some CVEs that 14.4.2 doesn&#8217;t, so it has more bugs as well as less. See <a href="Testing.html">Testing</a>.</li>
</ul>

<p>Some of its commits have been applied: those which became Debian patches
and others necessary for other patches to apply including:</p>

<ul>
<li><a href="https://sourceforge.net/p/sox/code/ci/9ce4a4a">9ce4a4a</a>:: <code>Segmentation fault in rate.c:504:30</code> See <a href="https://sourceforge.net/p/sox/bugs/334">bug 334</a> and issue #56.</li>
<li><a href="https://sourceforge.net/p/sox/code/ci/ccedd08">ccedd08</a>: <code>Clean up lsx_malloc and friends</code> See issue #57.</li>
</ul>

<p>and it would be worth scanning the 169 commits since 14.4.2 for bug fixes.</p>

<h2 id="issues">Issues</h2>

<p><a href="https://sourceforge.net/p/sox/bugs">Bugs reported on <code>sox.sf.net</code></a> since 14.4.2 need importing into the <code>sox_ng</code> issue tracker.</p>

<h2 id="todo">TODO</h2>

<h3 id="fixbug321">Fix bug 321</h3>

<p><a href="https://sourceforge.net/p/sox/bugs/321">Bug 321</a>: Stack-Buffer-Overflow in fft4g.c
is addressed by <a href="https://sourceforge.net/p/sox/code/ci/b7883ae">patch b7883ae</a>,
imported by Debian, but on the test case it makes sox loop for 6 seconds
consuming gigabytes of memory and creates a 127MB audio file of random noise
just over an hour long. See issue #18: CVE-2017&#8211;8356.</p>

<p>This is because the check against <code>FFT4G_MAX_SIZE</code> makes the functions
in <code>fft4g.c</code> <code>return</code> instead of failing. The solution is to turn each</p>

<pre><code>        if (n &gt; FFT4G_MAX_SIZE)
                return;
</code></pre>

<p>into</p>

<pre><code>        if (n &gt; FFT4G_MAX_SIZE) {
                lsx_fail(&quot;FFT size is too large&quot;);
                exit(2);
        }
</code></pre>

<h3 id="addreadmetotherepository">Add <code>README</code> to the repository</h3>

<p>SoX&#8217;s <code>README</code> file is generated by <code>README.sh</code> and is not included
in the repository. As a consequence, code browsed at <code>sox.sf.net</code>
shows at the bottom of the page <code>README.osx</code> or <code>README.win32</code>
which are irrelevant.</p>

<p>It would be better to run <code>README.sh</code> and add the generated <code>README</code>
to the repository. People editing <code>README.sh</code> or <code>FEATURES.in</code>
will have to remember to update <code>README</code> too and commit it,
unless this can be automated.</p>

<h3 id="importpatches">Import patches</h3>

<p>If <code>sox.sf.net</code> maintainers wish to import patches from <code>sox_ng</code>
and make a <code>sox-14.4.3</code> release, that is of course fine.
After all, it&#8217;s where everyone goes to get the latest <code>sox</code>
and where semiautomatic distros update from.</p>
<hr>Generated by <tt>makehtml.sh</tt> on Sat Sep 14 08:24:28 PM CEST 2024</body>
