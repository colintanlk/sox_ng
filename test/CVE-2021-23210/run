#! /bin/sh

# CVE-2021-23210
# A floating point exception (divide-by-zero) issue was discovered in SoX
# in function read_samples() of voc.c file. An attacker with a crafted file
# could cause an application to crash.

# 14.4.2
# sox WARN voc: VOC input: short file
# and exits 0
# with address sanitizer, global-buffer-overflow

# Debian
# says nothing and exits 0
# with address sanitizer, global-buffer-overflow

# 42b355
# Floating point exception (core dumped)

rm -f core

${sox:-sox} bug3 -n noiseprof /dev/null
status=$?
echo $status

rm -f core

exit $status
